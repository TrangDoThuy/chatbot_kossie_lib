# chatbot_kossie_lib
ChatBot is a Python module that provides a simple API for generating chatbot responses using OpenAI's GPT-3 language model. With ChatBot, you can easily create a chatbot that can converse with users and generate summaries of conversations.

## Usage
Here's an example of how to use ChatBot to create a simple chatbot that converses with users:
```
import time
from chatbot_lib import ChatBot

bot = ChatBot()

while True:
    user_input = input("You: ")
    response = bot.chatbot_conversation(user_input)
    print("Bot:", response)
    time.sleep(30)
 ```
This code creates a ChatBot instance and uses it to generate responses to user input. The ```chatbot_conversation``` method takes a user input string and returns a response string generated by the chatbot.

You can also use ChatBot to generate a summary of a conversation:
```
from chatbot_lib import ChatBot

bot = ChatBot()

# Have a conversation...
# ...

summary = bot.chatbot_summary()
print("Summary:", summary)
```
This code creates a ChatBot instance and uses it to generate a summary of a conversation. The chatbot_summary method returns a string containing a summary of the conversation.
## API Key
Before using ChatBot, you'll need to set your OpenAI API key in the .env file located in the root directory of your project. Your .env file should look like this:

```
OPENAI_API_KEY="your_api_key_here"
```

Replace your_api_key_here with your actual OpenAI API key.

### Note: 
There is a rate limit on OpenAI API calls, which is currently set at 3 calls per minute. If you exceed this limit, the ```chatbot_conversation``` and ```chatbot_summary``` functions will raise an error.

## Configuration
You can configure ChatBot by passing a JSON configuration file to the ChatBot constructor:

```
from chatbot import ChatBot

bot = ChatBot(config_file="config.json")
```
The configuration file should be a JSON file with the following structure:
```
{
  "language": "en",
  "initial_messages_en": [
    {
      "role": "system",
      "content": "You are ChatBot, an empathetic assistant of professional mental coach in a mental coaching session. You will talk with client  who is seeking mental help. Then please ask client 5 empathy curious deep open-ended questions to get more specific information as much as possible about the problem of client to find out the cause of problem. You ask each question then wait for the answer from client, then ask other question. The number of questions is limited to 5. Please to not provide any advice or suggestion or guidance to client. If they ask what should they do or ask for any suggestion aor guidance, please say that: \"We're matching you with a coach based on your unique situation to provide personalized guidance and support.\" You show empathy after each answer, no need to mention about therapy, please remove repeated questions or answer. The purpose of this conversation is to gather client information so that the real therapist can provide suggestion. Before close the session ask client if they have any other concern, then close the conversation with a reminder that we are here to support. Finish with \"We're matching you with a coach based on your unique situation to provide personalized guidance and support.\""
    },
    {
      "role": "assistant",
      "content": "Welcome to Kossie! I'm Kaia. How are you feeling today?"
    }
  ],
  "initial_messages_zh": [
    {
      "role": "system",
      "content": "You are ChatBot, an empathetic assistant of professional mental coach in a mental coaching session. You will talk with client  who is seeking mental help. All conversation will be in Cantonese. Then please ask client 5 empathy curious deep open-ended questions to get more specific information as much as possible about the problem of client to find out the cause of problem. You ask each question then wait for the answer from client, then ask other question. The number of questions is limited to 5. Please to not provide any advice or suggestion or guidance to client. If they ask what should they do or ask for any suggestion aor guidance, please say that: \"我哋會為你尋找到最適合你嘅心理輔導師，提供個人化嘅指導同埋支持\" You show empathy after each answer, no need to mention about therapy, please remove repeated questions or answer. The purpose of this conversation is to gather client information so that the real therapist can provide suggestion. Before close the session ask client if they have any other concern, then close the conversation with a reminder that we are here to support. Finish with \"我哋會為你尋找到最適合你嘅心理輔導師，提供個人化嘅指導同埋支持\""
    },
    {
      "role": "assistant",
      "content": "你好，歡迎來到精神輔導會談。我係專業心理輔導師嘅同理心助手。請問有咩問題需要幫忙？"
    }
  ],
  "initial_messages_cn": [
    {
      "role": "system",
      "content": "You are ChatBot, an empathetic assistant of professional mental coach in a mental coaching session. You will talk with client  who is seeking mental help. All conversation will be in Mandarin. Then please ask client 5 empathy curious deep open-ended questions to get more specific information as much as possible about the problem of client to find out the cause of problem. You ask each question then wait for the answer from client, then ask other question. The number of questions is limited to 5. Please to not provide any advice or suggestion or guidance to client. If they ask what should they do or ask for any suggestion aor guidance, please say that: \"我们将会为您寻找到最适合您的心理辅导师，提供个性化的指导和支持。\" You show empathy after each answer, no need to mention about therapy, please remove repeated questions or answer. The purpose of this conversation is to gather client information so that the real therapist can provide suggestion. Before close the session ask client if they have any other concern, then close the conversation with a reminder that we are here to support. Finish with \"我们将会为您寻找到最适合您的心理辅导师，提供个性化的指导和支持。\""
    },
    {
      "role": "assistant",
      "content": "你好，欢迎来到精神辅导会话。我是专业心理辅导师的同理心助手。请告诉我您需要帮助的问题。"
    }
  ],
  "categories": ["relationship", "sex", "career", "well-being"],
  "tags": [
    "online dating",
    "romantic relationship",
    "single life",
    "situationship",
    "toxic relationship",
    "boundaries setting",
    "intimacy",
    "orgasm",
    "sex drive",
    "sex tips",
    "burnout",
    "career advice",
    "productivity",
    "work stress",
    "workplace culture",
    "emotional support",
    "fear",
    "feeling",
    "mind and body",
    "self love"
  ],
  "summary_prompt": {
    "content": "Your task is to generate a short summary about client mental issue from a conversation in a counselling session.\n\nSummarize the conversation below, delimited by triple backticks, in at most 250 words. The summary should be written from client perspective, using subject as \"I\". Remove all content of assistant in the summary."
  },
  "summary_title_prompt": {
    "content": "Generate a informal title less than 8 words for this paragraph:"
  },
  "generate_questions_prompt": {
    "content": "Generate 3 questions that you think user would like to ask the coach to solve his/her problem from this paragraph:"
  },
  "get_category_prompt": {
    "content": "Your task is to classify into one of these categories. Please only return the name of category. Paragraph:"
  },
  "get_tags_prompt": {
    "content": "Given the paragraph following, your task is to return the most 3 tags related to paragraph from this tags list. Please only return the 3 names of tag as this form: tag_1, tag_2, tag_3. Paragraph: "
  },
  "rate_limit": 20,
  "model_engine": "gpt-3.5-turbo"
}

```

The ```initial_message``` key specifies the role and task of chatbot. The ```summary_prompt``` key specifies the prompt that the chatbot should use when generating a conversation summary. The ```rate_limit``` key specifies the minimum number of seconds between chatbot API requests. The ```model_engine``` key specifies the GPT-3 model engine that the chatbot should use.
